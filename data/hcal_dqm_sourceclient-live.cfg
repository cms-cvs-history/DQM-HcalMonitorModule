
process DQM = { 
	include "DQM/HcalMonitorModule/data/HcalMonitorModule.cfi"
	include "DQM/HcalMonitorClient/data/HcalMonitorClient-live.cfi"
	include "DQM/HcalMonitorModule/data/Hcal_FrontierConditions_GREN_ORCON.cff"
	include "FWCore/MessageLogger/data/MessageLogger.cfi"

	include "EventFilter/HcalRawToDigi/data/HcalRawToDigi.cfi"
        include "RecoLocalCalo/HcalRecProducers/data/HcalSimpleReconstructor-hbhe.cfi"
        include "RecoLocalCalo/HcalRecProducers/data/HcalSimpleReconstructor-ho.cfi"
        include "RecoLocalCalo/HcalRecProducers/data/HcalSimpleReconstructor-hf.cfi"
        // Lines below preceded by "### " should be uncommented if you wish to make CaloTower plots
        // (Module calls adapted from DQM/EcalBarrelMonitorModule/test/data/monitor-standalone.cfg )
        ### include "RecoLocalCalo/EcalRecProducers/data/ecalRecHit.cfi"
        ### include "RecoJets/Configuration/data/CaloTowersRec.cff"
        //I'm not sure that the ecalWeightUncalibRecHits stuff is used by the towerMaker -- Jeff
        ### module ecalUncalibHit = ecalWeightUncalibRecHit from "RecoLocalCalo/EcalRecProducers/data/ecalWeightUncalibRecHit.cfi"
        ### replace ecalRecHit.EBuncalibRecHitCollection = ecalUncalibHit:EcalUncalibRecHitsEB
        ### replace ecalRecHit.EEuncalibRecHitCollection = ecalUncalibHit:EcalUncalibRecHitsEE
        ### es_source = EcalTrivialConditionRetriever{
        ### untracked double adcToGeVEBConstant = 0.00875 # 0.035
        ### untracked vdouble amplWeights = { -0.333, -0.333, -0.333,
        ###                                   0.000,  0.000,  1.000,
        ###                                   0.000,  0.000,  0.000,  0.000 }
        ### untracked vdouble pedWeights  = {  0.333,  0.333,  0.333,
        ###                                   0.000,  0.000,  0.000,
        ###                                   0.000,  0.000,  0.000,  0.000 }
        ### untracked vdouble jittWeights = {  0.041,  0.041,  0.041,
        ###                                  0.000,  1.325, -0.050,
        ###                                  -0.504, -0.502, -0.390,  0.000 }
        ###  }
 
        ### include "CalibCalorimetry/EcalLaserCorrection/data/ecalLaserCorrectionService.cfi"
        ### replace hcalMonitor.CaloTowerMonitor=true 
        ### replace hcalClient.CaloTowerClient=true 
             
        path p = { hcalDigis, horeco, hfreco, hbhereco, 
        ###        ecalRecHit, towerMaker,  
	hcalMonitor, hcalClient, dqmEnv, dqmSaver }



	untracked PSet options = {
		untracked vstring Rethrow = { "ProductNotFound", "TooManyProducts", "TooFewProducts" }
	}

	untracked PSet maxEvents = {untracked int32 input = -1}

      source = EventStreamHttpReader {
        string sourceURL = "http://cmsdisk1.cms:11100/urn:xdaq-application:service=storagemanager"
        int32 max_event_size = 7000000
        int32 max_queue_depth = 5
        untracked string consumerName = "HCAL DQM Consumer"
        untracked string consumerPriority = "normal"
        untracked int32 headerRetryInterval = 3
        untracked double maxEventRequestRate = 10
        untracked PSet SelectEvents = { vstring SelectEvents={"*"} }
      }

	service = DaqMonitorROOTBackEnd{
               untracked int32 verbose = 0
        #   untracked string referenceFileName = "/data1/dropbox/"
        }
	
	service = MonitorDaemon{
	       #	 if true, will automatically start DQM thread in background
	       #  (default: false)
	       untracked bool AutoInstantiate = true

	       # if >=0, upon a connection problem, the source will automatically 
	       # attempt to reconnect with a time delay (secs) specified here 
	       # (default: 5)
	       untracked int32 reconnect_delay = 5
               # maximum # of reconnection attempts upon connection problems (default: 10)
               untracked int32 maxAttempts2Reconnect	= 99999

	       # collector hostname
       	       # (default: localhost)
               untracked string DestinationAddress = "srv-c2d05-19"

               # port for communicating with collector
               # (default: 9090)
               untracked int32 SendPort = 9090

               # monitoring period in ms (i.e. how often monitoring elements 
               # are shipped to the collector
               # (default: 1000)
               untracked int32 UpdateDelay = 10

               # name of DQM source
               # (default: DQMSource)
               untracked string NameAsSource = "Hcal"
	}

	service = DQMShipMonitoring{
		// event-period for shipping monitoring to collector (default: 25)
		untracked uint32 period = 25
	}

    #########################################################
    #### BEGIN DQM Online Environment #######################
    #########################################################
    # use include file for dqmEnv dqmSaver
       include "DQMServices/Components/test/dqm_onlineEnv.cfi"
       replace dqmSaver.fileName      = "Hcal"
       replace dqmSaver.dirName      = "/data1/dropbox"
       replace dqmEnv.subSystemFolder = "Hcal"
       
       # optionally change fileSaving  conditions
       // replace dqmSaver.prescaleLS =   -1
       // replace dqmSaver.prescaleTime = -1 # in minutes
       // replace dqmSaver.prescaleEvt =  -1
       // replace dqmSaver.saveAtRunEnd = true
       // replace dqmSaver.saveAtJobEnd = false
       # will add switch to select histograms to be saved soon
   
    #########################################################
    #### END ################################################
    #########################################################

}
