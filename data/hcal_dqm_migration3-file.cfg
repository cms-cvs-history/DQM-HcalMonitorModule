
process HCALDQM = { 
	include "DQM/HcalMonitorModule/data/HcalMonitorModule.cfi"
	include "DQM/HcalMonitorClient/data/HcalMonitorClient.cfi"
	include "DQM/HcalMonitorModule/data/Hcal_FrontierConditions_GREN.cff"
	include "FWCore/MessageLogger/data/MessageLogger.cfi"

	include "EventFilter/HcalRawToDigi/data/HcalRawToDigi.cfi"
        include "RecoLocalCalo/HcalRecProducers/data/HcalSimpleReconstructor-hbhe.cfi"
        include "RecoLocalCalo/HcalRecProducers/data/HcalSimpleReconstructor-ho.cfi"
        include "RecoLocalCalo/HcalRecProducers/data/HcalSimpleReconstructor-hf.cfi"
	
         // Lines below preceded by "### " should be uncommented if you wish to make CaloTower plots
        // (Module calls adapted from DQM/EcalBarrelMonitorModule/test/data/monitor-standalone.cfg )
        ### include "RecoLocalCalo/EcalRecProducers/data/ecalRecHit.cfi"
        ### include "RecoJets/Configuration/data/CaloTowersRec.cff"
        //I'm not sure that the ecalWeightUncalibRecHits stuff is used by the towerMaker -- Jeff
        ### module ecalUncalibHit = ecalWeightUncalibRecHit from "RecoLocalCalo/EcalRecProducers/data/ecalWeightUncalibRecHit.cfi"
        ### replace ecalRecHit.EBuncalibRecHitCollection = ecalUncalibHit:EcalUncalibRecHitsEB
        ### replace ecalRecHit.EEuncalibRecHitCollection = ecalUncalibHit:EcalUncalibRecHitsEE
        ### es_source = EcalTrivialConditionRetriever{
        ### untracked double adcToGeVEBConstant = 0.00875 # 0.035
        ### untracked vdouble amplWeights = { -0.333, -0.333, -0.333,
        ###                                   0.000,  0.000,  1.000,
        ###                                   0.000,  0.000,  0.000,  0.000 }
        ### untracked vdouble pedWeights  = {  0.333,  0.333,  0.333,
        ###                                   0.000,  0.000,  0.000,
        ###                                   0.000,  0.000,  0.000,  0.000 }
        ### untracked vdouble jittWeights = {  0.041,  0.041,  0.041,
        ###                                  0.000,  1.325, -0.050,
        ###                                  -0.504, -0.502, -0.390,  0.000 }
        ###  }
 
        ### include "CalibCalorimetry/EcalLaserCorrection/data/ecalLaserCorrectionService.cfi"
        
        path p = { hcalDigis, horeco, hfreco, hbhereco, 
        ###        ecalRecHit, towerMaker,  
	hcalMonitor, hcalClient, dqmEnv, dqmSaver }

	untracked PSet options = {
		untracked vstring Rethrow = { "ProductNotFound", "TooManyProducts", "TooFewProducts" }
	}
	untracked PSet maxEvents = {untracked int32 input = 100 }
	
	// The last good run of GREN `07
	source = PoolSource {
	        untracked vstring fileNames = {
			'/store/data/GlobalNov07/DTHcal/000/030/625/RAW/0000/121F13FE-E9A4-DC11-994D-001617DBD272.root',
			'/store/data/GlobalNov07/DTHcal/000/030/625/RAW/0000/324F1DA3-E5A4-DC11-A732-000423D65A7E.root',
			'/store/data/GlobalNov07/DTHcal/000/030/625/RAW/0000/34F36443-E9A4-DC11-8C8A-000423D944D4.root',
			'/store/data/GlobalNov07/DTHcal/000/030/625/RAW/0000/360B4662-E8A4-DC11-B423-001617DBCEF6.root',
			'/store/data/GlobalNov07/DTHcal/000/030/625/RAW/0000/421BAA91-E8A4-DC11-87A9-001617DBD36C.root',
			'/store/data/GlobalNov07/DTHcal/000/030/625/RAW/0000/4CE78852-E6A4-DC11-B47A-000423D665B2.root',
			'/store/data/GlobalNov07/DTHcal/000/030/625/RAW/0000/7637B20C-E8A4-DC11-950A-001617C3B652.root',
			'/store/data/GlobalNov07/DTHcal/000/030/625/RAW/0000/7832F4A6-E6A4-DC11-AE02-00304856284E.root',
			'/store/data/GlobalNov07/DTHcal/000/030/625/RAW/0000/943B3531-E7A4-DC11-B67C-001617DBD49A.root',
			'/store/data/GlobalNov07/DTHcal/000/030/625/RAW/0000/A4C5514F-E5A4-DC11-9BDF-000423D98708.root',
			'/store/data/GlobalNov07/DTHcal/000/030/625/RAW/0000/D0D20FF6-E7A4-DC11-BBDA-001617DBD2E2.root',
			'/store/data/GlobalNov07/DTHcal/000/030/625/RAW/0000/D4486B09-E6A4-DC11-AA00-000E0C3F08B7.root',
			'/store/data/GlobalNov07/DTHcal/000/030/625/RAW/0000/E0481BB5-E7A4-DC11-8BB2-003048561116.root',
			'/store/data/GlobalNov07/DTHcal/000/030/625/RAW/0000/F016E2D2-E8A4-DC11-AD13-001617DBCFA6.root',
			'/store/data/GlobalNov07/DTHcal/000/030/625/RAW/0000/F2A2C7F7-E6A4-DC11-BF27-000423D59C46.root'
	        }

        }

include "DQMServices/Core/data/DQM.cfg"
replace DQM.collectorHost = "myhost"
replace DQM.collectorPort = 9092

	// To run on .dat streamer files (you need to change the path to the datafile):
	// source = NewEventStreamFileReader {
        // 	untracked vstring fileNames = {
        // 	    "file:/data1/lookarea/GlobalAug07.00017220.0001.A.storageManager.0.0000.dat",
        // 	    "file:/data1/lookarea/GlobalAug07.00017220.0002.A.storageManager.0.0000.dat",
        // 	    "file:/data1/lookarea/GlobalAug07.00017220.0003.A.storageManager.0.0000.dat"
        // 	}
     	// }
	
	//To run on HCAL local runs:  (you need to have acces to /bigspool or modify the path to the datafile)	
	// source = HcalTBSource {
        //        untracked vstring fileNames = {'file:/bigspool/usc/USC_035349.root'}
	//        untracked vstring streams = { 
	// 		//HBHE a, b, c:
	// 		'HCAL_DCC700','HCAL_DCC701','HCAL_DCC702','HCAL_DCC703','HCAL_DCC704','HCAL_DCC705',
	// 		'HCAL_DCC706','HCAL_DCC707','HCAL_DCC708','HCAL_DCC709','HCAL_DCC710','HCAL_DCC711',
	// 		'HCAL_DCC712','HCAL_DCC713','HCAL_DCC714','HCAL_DCC715','HCAL_DCC716','HCAL_DCC717',
	// 		//HF:
	// 		'HCAL_DCC718','HCAL_DCC719','HCAL_DCC720','HCAL_DCC721','HCAL_DCC722','HCAL_DCC723',
	// 		//HO:
	// 		'HCAL_DCC724','HCAL_DCC725','HCAL_DCC726','HCAL_DCC727','HCAL_DCC728','HCAL_DCC729',
	// 		'HCAL_DCC730','HCAL_DCC731',
	// 		'HCAL_Trigger','HCAL_SlowData'
	// 	}
	// }	


	//service = DaqMonitorROOTBackEnd{}
	//
	//service = MonitorDaemon{
	//       #	 if true, will automatically start DQM thread in background
	//       #  (default: false)
	//       untracked bool AutoInstantiate = false
	//
	//       # if >=0, upon a connection problem, the source will automatically 
	//       # attempt to reconnect with a time delay (secs) specified here 
	//       # (default: 5)
	//       untracked int32 reconnect_delay = 5
        //       # maximum # of reconnection attempts upon connection problems (default: 10)
        //       untracked int32 maxAttempts2Reconnect	= 0
	//
	//       # collector hostname
       	//       # (default: localhost)
        //       untracked string DestinationAddress = "localhost"
	//
        //       # port for communicating with collector
        //       # (default: 9090)
        //       untracked int32 SendPort = 9090
	//
        //       # monitoring period in ms (i.e. how often monitoring elements 
        //       # are shipped to the collector
        //       # (default: 1000)
        //       untracked int32 UpdateDelay = 10
	//
        //       # name of DQM source
        //       # (default: DQMSource)
        //       untracked string NameAsSource = "Hcal"
	//}
	//
	//service = DQMShipMonitoring{
	//	// event-period for shipping monitoring to collector (default: 25)
	//	untracked uint32 period = 100
	//}

	#########################################################
 	#### BEGIN DQM Online Environment #######################
	#########################################################
	# use include file for dqmEnv dqmSaver
	include "DQMServices/Components/test/dqm_onlineEnv.cfi"
	replace dqmSaver.fileName      = "Hcal"
	replace dqmEnv.subSystemFolder = "Hcal"
       
       # optionally change fileSaving  conditions
       // replace dqmSaver.prescaleLS =   -1
       // replace dqmSaver.prescaleTime = -1 # in minutes
       // replace dqmSaver.prescaleEvt =  -1
       // replace dqmSaver.saveAtRunEnd = true
       // replace dqmSaver.saveAtJobEnd = false
       # will add switch to select histograms to be saved soon
   
    #########################################################
    #### END ################################################
    #########################################################
}
