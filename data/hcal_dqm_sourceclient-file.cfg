process HCALDQM = { 
    include "DQMServices/Core/data/DQM.cfg"
    replace DQM.collectorHost = "myhost"
    replace DQM.collectorPort = 9092
        
    include "DQM/HcalMonitorModule/data/HcalMonitorModule.cfi"
    replace hcalMonitor.DigiOccThresh     = -999999999  //Temporary measure while DigiOcc is reworked.

    replace hcalMonitor.DataFormatMonitor = true
    replace hcalMonitor.DigiMonitor       = true
    replace hcalMonitor.PedestalMonitor   = true
    replace hcalMonitor.LEDMonitor        = true
    replace hcalMonitor.TrigPrimMonitor   = true

    replace hcalMonitor.HotCellMonitor    = false
    replace hcalMonitor.DeadCellMonitor   = false
    replace hcalMonitor.RecHitMonitor     = false
    replace hcalMonitor.MTCCMonitor       = false
    replace hcalMonitor.CaloTowerMonitor  = false
    replace hcalMonitor.HcalAnalysis      = false
    
    include "DQM/HcalMonitorClient/data/HcalMonitorClient.cfi"
    replace hcalClient.plotPedRAW       = true
    replace hcalClient.DoPerChanTests   = false

    replace hcalClient.DataFormatClient = true
    replace hcalClient.DigiClient       = true
    replace hcalClient.LEDClient        = true
    replace hcalClient.PedestalClient   = true
    replace hcalClient.TrigPrimClient   = true

    replace hcalClient.RecHitClient     = false
    replace hcalClient.HotCellClient    = false
    replace hcalClient.DeadCellClient   = false
    replace hcalClient.CaloTowerClient  = false
    
    include "DQM/HcalMonitorModule/data/Hcal_FrontierConditions.cff"
    replace hcalConditions.connect  = "frontier://Frontier/CMS_COND_20X_HCAL"

    include "FWCore/MessageLogger/data/MessageLogger.cfi"
    
    include "EventFilter/HcalRawToDigi/data/HcalRawToDigi.cfi"
    include "RecoLocalCalo/HcalRecProducers/data/HcalSimpleReconstructor-hbhe.cfi"
    include "RecoLocalCalo/HcalRecProducers/data/HcalSimpleReconstructor-ho.cfi"
    include "RecoLocalCalo/HcalRecProducers/data/HcalSimpleReconstructor-hf.cfi"
    


     path p = { hcalDigis, horeco, hfreco, hbhereco, hcalMonitor, hcalClient, dqmEnv, dqmSaver }

    
    untracked PSet options = {
	untracked vstring Rethrow = { "ProductNotFound", "TooManyProducts", "TooFewProducts" }
    }

    untracked PSet maxEvents = {untracked int32 input = 100 }

	//To run on HCAL local runs:  (you need to have access to /bigspool or modify the path to the datafile)	
	source = HcalTBSource {
               untracked vstring fileNames = {'file:/afs/cern.ch/user/s/stjohn/scratch0/USC_044268.root'}
	       untracked vstring streams = { 
			//HBHE a, b, c:
			'HCAL_DCC700','HCAL_DCC701','HCAL_DCC702','HCAL_DCC703','HCAL_DCC704','HCAL_DCC705',
			'HCAL_DCC706','HCAL_DCC707','HCAL_DCC708','HCAL_DCC709','HCAL_DCC710','HCAL_DCC711',
			'HCAL_DCC712','HCAL_DCC713','HCAL_DCC714','HCAL_DCC715','HCAL_DCC716','HCAL_DCC717',
			//HF:
			'HCAL_DCC718','HCAL_DCC719','HCAL_DCC720','HCAL_DCC721','HCAL_DCC722','HCAL_DCC723',
			//HO:
			'HCAL_DCC724','HCAL_DCC725','HCAL_DCC726','HCAL_DCC727','HCAL_DCC728','HCAL_DCC729',
			'HCAL_DCC730','HCAL_DCC731',
			'HCAL_Trigger','HCAL_SlowData'
		}
	}	
	

	// 
	// source = PoolSource {  
	// untracked vstring fileNames = { //////// Run 42863
	// 	'/store/data/Global/A/000/000/000/RAW/0000/74831B0B-C01A-DD11-8B97-000423D6C8E6.root',
	// 	'/store/data/Global/A/000/000/000/RAW/0000/74A7D905-C01A-DD11-BDED-001617E30D38.root',
	// 	'/store/data/Global/A/000/000/000/RAW/0000/882E8C03-C01A-DD11-A1BE-001617C3B64C.root'
	// 	}
	// }

	// To run on .dat streamer files (you need to change the path to the datafile):
	// source = NewEventStreamFileReader {
        // 	untracked vstring fileNames = {
        // 	    "file:/data1/lookarea/GlobalAug07.00017220.0001.A.storageManager.0.0000.dat",
        // 	    "file:/data1/lookarea/GlobalAug07.00017220.0002.A.storageManager.0.0000.dat",
        // 	    "file:/data1/lookarea/GlobalAug07.00017220.0003.A.storageManager.0.0000.dat"
        // 	}
     	// }
	
	##########################################################
 	# BEGIN DQM Online Environment ###########################
	##########################################################
	# use include file for dqmEnv dqmSaver
        include "DQMServices/Components/data/DQMEnvironment.cfi"
        replace dqmSaver.convention       = "Online"
        //replace dqmSaver.dirName          = "."
        replace dqmSaver.producer         = "DQM"
        replace dqmEnv.subSystemFolder    = "Hcal"

        # optionally change fileSaving  conditions
        // replace dqmSaver.prescaleLS =   -1
        // replace dqmSaver.prescaleTime = -1 # in minutes
        // replace dqmSaver.prescaleEvt =  -1
        // replace dqmSaver.saveAtRunEnd = true
        // replace dqmSaver.saveAtJobEnd = false
        # will add switch to select histograms to be saved soon
   
        #########################################################
        #### END ################################################
        #########################################################
}
