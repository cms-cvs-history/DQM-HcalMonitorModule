
process HCALDQM = { 
	include "DQM/HcalMonitorModule/data/HcalMonitorModule.cfi"
	include "DQM/HcalMonitorClient/data/HcalMonitorClient.cfi"
	include "DQM/HcalMonitorModule/data/Hcal_FrontierConditions.cff"
	include "FWCore/MessageLogger/data/MessageLogger.cfi"

	include "EventFilter/HcalRawToDigi/data/HcalRawToDigi.cfi"
        include "RecoLocalCalo/HcalRecProducers/data/HcalSimpleReconstructor-hbhe.cfi"
        include "RecoLocalCalo/HcalRecProducers/data/HcalSimpleReconstructor-ho.cfi"
        include "RecoLocalCalo/HcalRecProducers/data/HcalSimpleReconstructor-hf.cfi"
	
	path p = { hcalDigis, horeco, hfreco, hbhereco, hcalMonitor, hcalClient, dqmEnv, dqmSaver }

	untracked PSet options = {
		untracked vstring Rethrow = { "ProductNotFound", "TooManyProducts", "TooFewProducts" }
	}
	untracked PSet maxEvents = {untracked int32 input = -1 }
	
	source = NewEventStreamFileReader {
        untracked vstring fileNames = {
            "file:/data1/lookarea/GlobalAug07.00017220.0001.A.storageManager.0.0000.dat",
            "file:/data1/lookarea/GlobalAug07.00017220.0002.A.storageManager.0.0000.dat",
            "file:/data1/lookarea/GlobalAug07.00017220.0003.A.storageManager.0.0000.dat"
        }
     }
	

	service = DaqMonitorROOTBackEnd{}
	
	service = MonitorDaemon{
	       #	 if true, will automatically start DQM thread in background
	       #  (default: false)
	       untracked bool AutoInstantiate = true

	       # if >=0, upon a connection problem, the source will automatically 
	       # attempt to reconnect with a time delay (secs) specified here 
	       # (default: 5)
	       untracked int32 reconnect_delay = 5
               # maximum # of reconnection attempts upon connection problems (default: 10)
               untracked int32 maxAttempts2Reconnect	= 10

	       # collector hostname
       	       # (default: localhost)
               untracked string DestinationAddress = "localhost"

               # port for communicating with collector
               # (default: 9090)
               untracked int32 SendPort = 9090

               # monitoring period in ms (i.e. how often monitoring elements 
               # are shipped to the collector
               # (default: 1000)
               untracked int32 UpdateDelay = 10

               # name of DQM source
               # (default: DQMSource)
               untracked string NameAsSource = "Hcal"
	}

	service = DQMShipMonitoring{
		// event-period for shipping monitoring to collector (default: 25)
		untracked uint32 period = 100
	}

	#########################################################
 	#### BEGIN DQM Online Environment #######################
	#########################################################
	# use include file for dqmEnv dqmSaver
	include "DQMServices/Components/test/dqm_onlineEnv.cfi"
	replace dqmSaver.fileName      = "Hcal"
	replace dqmEnv.subSystemFolder = "Hcal"
       
       # optionally change fileSaving  conditions
       // replace dqmSaver.prescaleLS =   -1
       // replace dqmSaver.prescaleTime = -1 # in minutes
       // replace dqmSaver.prescaleEvt =  -1
       // replace dqmSaver.saveAtRunEnd = true
       // replace dqmSaver.saveAtJobEnd = false
       # will add switch to select histograms to be saved soon
   
    #########################################################
    #### END ################################################
    #########################################################
}
